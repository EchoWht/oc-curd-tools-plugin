<?php namespace Blskye\CurdTools\Controllers\API;
use Backend\Classes\Controller;
use BackendMenu;
use Illuminate\Support\Facades\Request;
use {{model}};
class {{controllername}}ApiController extends Controller
{
    protected $helpers;
    public function __construct()
    {
        parent::__construct();
    }

    /**
     * 所有记录
     * @route_demo /data?sort=id,-name
     * @return mixed
    */
    public function index(){
        $query={{modelname}}::query();
        $sort=Request::input('sort');
        if ($sort!=null){
            $sorts=explode(',',Request::input('sort'));
            foreach ($sorts as $sortCol){
                $sortDir=starts_with($sortCol,'-')?'desc':'asc';
                $sortCol=ltrim($sortCol,'-');
                $query->orderBy($sortCol,$sortDir);
            }
        }
        return $query->paginate(10);
    }
}